const hamburger=document.getElementById("hamburger"),nav=document.getElementById("navbar");hamburger.addEventListener("click",(()=>{hamburger.classList.toggle("active"),nav.classList.toggle("active")})),document.addEventListener("click",(e=>{nav.contains(e.target)||hamburger.contains(e.target)||(hamburger.classList.remove("active"),nav.classList.remove("active")),"A"===e.target.tagName&&nav.classList.contains("active")&&(hamburger.classList.remove("active"),nav.classList.remove("active"))}));const observer=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(e.target.classList.add("show"),observer.unobserve(e.target))}))}),{threshold:.35});document.querySelectorAll(".section").forEach((e=>{observer.observe(e)})),window.addEventListener("load",(function(){document.getElementById("loader").classList.add("hidden")}));const toggleBtn=document.getElementById("theme-toggle"),body=document.body,savedTheme=localStorage.getItem("theme");"dark"===savedTheme&&(body.classList.add("dark-mode"),toggleBtn.textContent="‚òÄÔ∏è Light Mode"),toggleBtn.addEventListener("click",(()=>{body.classList.toggle("dark-mode");const e=body.classList.contains("dark-mode");toggleBtn.textContent=e?"‚òÄÔ∏è Light Mode":"üåô Dark Mode",localStorage.setItem("theme",e?"dark":"light")}));const searchIcon=document.querySelector(".search-icon"),navSearch=document.querySelector(".nav-search"),searchInput=document.getElementById("product-search"),products=document.querySelectorAll(".product-card"),allSections=document.querySelectorAll("main > section"),productsSection=document.querySelector("#products");function applyFilter(e){allSections.forEach((e=>{e!==productsSection&&(e.style.display="none")})),productsSection.style.display="block",products.forEach((t=>{t.querySelector("h3").textContent.toLowerCase().includes(e)?t.style.display="":t.style.display="none"}))}function resetPage(){allSections.forEach((e=>e.style.display="")),products.forEach((e=>e.style.display=""))}searchIcon.addEventListener("click",(()=>{navSearch.classList.contains("active")&&""!==searchInput.value.trim()?(applyFilter(searchInput.value.toLowerCase().trim()),productsSection.scrollIntoView({behavior:"smooth"})):(navSearch.classList.toggle("active"),navSearch.classList.contains("active")?searchInput.focus():resetPage())})),searchInput.addEventListener("input",(()=>{const e=searchInput.value.toLowerCase().trim();e?applyFilter(e):resetPage()}));let cart=JSON.parse(localStorage.getItem("cart"))||[];const cartBtn=document.getElementById("cart-btn"),cartDropdown=document.getElementById("cart-dropdown"),cartCount=document.getElementById("cart-count"),cartItems=document.getElementById("cart-items"),cartTotal=document.getElementById("cart-total"),placeOrderBtn=document.getElementById("place-order-btn");function updateCart(){cartItems.innerHTML="";let e=0;cart.forEach(((t,a)=>{e+=t.price*t.quantity,cartItems.innerHTML+=`\n      <div class="cart-item">\n        <span>${t.name} x ${t.quantity}</span>\n        <span>${t.price*t.quantity} RS</span>\n        <button onclick="removeItem(${a})">‚ùå</button>\n      </div>\n    `})),cartTotal.textContent=e+" RS",cartCount.textContent=cart.reduce(((e,t)=>e+t.quantity),0),localStorage.setItem("cart",JSON.stringify(cart))}function removeItem(e){cart.splice(e,1),updateCart()}cartBtn.addEventListener("click",(()=>{cartDropdown.style.display="block"===cartDropdown.style.display?"none":"block"})),document.querySelectorAll(".add-to-cart").forEach((e=>{e.addEventListener("click",(()=>{const t=e.dataset.name,a=parseInt(e.dataset.price),n=cart.find((e=>e.name===t));n?n.quantity++:cart.push({name:t,price:a,quantity:1}),updateCart()}))})),updateCart(),document.getElementById("place-order-btn").addEventListener("click",(function(){let e=JSON.parse(localStorage.getItem("cart"))||[];if(0===e.length)return void alert("Your cart is empty!");let t=e.map((e=>`${e.name} - ${e.quantity} x ${e.price} RS`)).join("\n"),a=e.reduce(((e,t)=>e+t.price*t.quantity),0);document.getElementById("message").value=t+`\n\nTotal: ${a} RS\nPayment: Cash on Delivery`,document.querySelector("#order").scrollIntoView({behavior:"smooth"})})),cartBtn.addEventListener("click",(()=>{cartDropdown.classList.toggle("show")}));
